description: Export the current diagram as a PNG image

metadata:
  status: draft
  reliability: medium
  tags: [drawio, export, png, image]
  author: macro-generator
  created: "2026-01-27"
  modified: "2026-01-27"

context:
  app: cyrus-code
  prerequisites:
    - App is launched
    - Diagram view is open with content

steps:
  - action: wait
    timeout: 1000
    expect:
      selector: "[data-testid='diagram-webview']"
      assert: exists
    why: Verify diagram view is open

  - action: click
    selector: "[data-testid='export-all-button']"
    why: Click the export button in the header

  - action: wait
    timeout: 500
    why: Wait for export dialog to appear

  - action: evaluate
    script: |
      // The DrawioEditor component has an exportPng() method
      // that can be triggered via ref from the App component.
      // This macro documents the user flow for exporting.
      // Actual implementation may require accessing the
      // DrawioEditor ref directly.
      console.log('Export dialog interaction would happen here');
      return true;
    expect:
      script: result === true
    why: Document export flow (implementation pending)

  - action: wait
    timeout: 1000
    why: Wait for export to complete
