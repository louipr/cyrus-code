# Diagram Loads Smoke Test
#
# Opens diagram view and verifies the Draw.io iframe loads.

description: Open diagram view and verify the Draw.io iframe loads.

metadata:
  status: verified
  reliability: high
  tags: [smoke, diagram, drawio]
  author: smoke-test
  created: "2025-01-02"
  modified: "2025-01-04"

context:
  app: cyrus-code
  prerequisites:
    - App is launched

test_cases:
  - id: open_diagram
    description: Open diagram view
    steps:
      - action: wait
        timeout: 1000
        expect:
          type: selector
          selector: "[data-testid='view-toggle']"
        why: Wait for app to be ready.

      - action: click
        selector: "[data-testid='view-toggle'] button:has-text('Diagram')"
        why: Click the Diagram button to switch to diagram view.

      - action: wait
        timeout: 1000
        expect:
          type: selector
          selector: "[data-testid='diagram-webview']"
        why: Wait for Draw.io webview to appear.
